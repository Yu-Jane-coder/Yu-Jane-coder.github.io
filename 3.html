<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Scarf VN - Chase Scene</title>
<style>
  html, body {
    margin: 0; padding: 0;
    background: #111;
    overflow: hidden;
    font-family: 'Arial', sans-serif;
    color: #fff;
  }

  /* 背景圖片區 */
  #city {
    position: absolute;
    width: 100%; height: 100%;
    background-image: url('city_snow_night.png'); /* <-- 雪夜都市 */
    background-size: cover;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    overflow: hidden;
  }

  /* 蛇角色圖片區 */
  #snake {
    width: 200px;
    height: auto;
    background-image: url('snake_idle.png'); /* <-- 蛇初始圖，吞口水 */
    background-size: contain;
    background-repeat: no-repeat;
    position: relative;
    bottom: -100px;
    transition: bottom 0.5s ease, left 0.5s ease, filter 0.5s ease, background-image 0.3s ease;
  }

  /* 文字敘事區 */
  #storyText {
    position: absolute;
    bottom: 50px;
    width: 90%;
    text-align: center;
    font-size: 20px;
    opacity: 0;
    transition: opacity 0.5s ease;
    background-color: rgba(0,0,0,0.5);
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
  }

  /* 雪花特效 */
  .snowflake {
    position: absolute;
    top: -10px;
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: fall linear infinite;
  }

  @keyframes fall {
    0% { transform: translateY(0px) translateX(0px); }
    100% { transform: translateY(100vh) translateX(20px); }
  }
</style>
</head>
<body>

<div id="city">
  <!-- 蛇角色 -->
  <div id="snake"></div>

  <!-- 敘事文字 -->
  <div id="storyText"></div>
</div>

<script>
  const snake = document.getElementById('snake');
  const storyText = document.getElementById('storyText');
  const city = document.getElementById('city');

  // 劇情步驟
  const storySteps = [
    {
      text: "\"I have to find my scarf before I pass out.\"",
      snakeImg: "snake_idle.png", // <-- 吞口水 / 初始
      filter: "brightness(100%)",
      bottom: "-100px"
    },
    {
      text: "The snake hesitates, shivering as the cold bites.",
      snakeImg: "snake_hesitate.png", // <-- 猶豫 / 顏色變淡
      filter: "brightness(70%)",
      bottom: "-80px"
    },
    {
      text: "It gathers courage and slowly slides forward.",
      snakeImg: "snake_slide_slow.png", // <-- 緩慢滑行
      filter: "brightness(70%)",
      bottom: "0px"
    },
    {
      text: "Suddenly, it bursts forward in a swift dash!",
      snakeImg: "snake_dash.png", // <-- 快速滑行
      filter: "brightness(70%)",
      bottom: "50px"
    },
    {
      text: "The chase begins!",
      snakeImg: "snake_slide_fast.png", // <-- 持續快速滑行
      filter: "brightness(70%)",
      bottom: "80px"
    }
  ];

  let currentStep = 0;

  function nextStep() {
    if(currentStep >= storySteps.length) return;

    const step = storySteps[currentStep];

    // 更新蛇圖片、位置、顏色
    snake.style.backgroundImage = `url('${step.snakeImg}')`;
    snake.style.bottom = step.bottom;
    snake.style.filter = step.filter;

    // 顯示文字
    storyText.innerText = step.text;
    storyText.style.opacity = 1;

    currentStep++;
  }

  // 點擊文字推進故事
  storyText.addEventListener('click', nextStep);

  window.onload = () => {
    // 生成雪花
    for(let i=0;i<30;i++){
      const snow = document.createElement('div');
      snow.classList.add('snowflake');
      snow.style.left = Math.random()*window.innerWidth + 'px';
      snow.style.animationDuration = (2+Math.random()*3)+'s';
      snow.style.opacity = Math.random();
      city.appendChild(snow);
    }

    // 初始文字顯示
    nextStep();
  };
</script>

</body>
</html>
