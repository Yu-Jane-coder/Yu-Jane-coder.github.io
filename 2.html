<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Story VN</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #111;
    font-family: 'Arial', sans-serif;
    color: #fff;
  }

  /* 過渡場：眼睛 */
  #transition {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
  }

  #eye {
    width: 150px;
    height: auto;
    background-image: url('eye_closed.png'); /* 替換眼睛圖片 */
    background-size: contain;
    background-repeat: no-repeat;
    opacity: 1;
    transition: opacity 1s ease;
  }

  /* 都市場景 */
  #city {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-image: url('city_snow_night.png'); /* 替換都市背景 */
    background-size: cover;
    background-position: center;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    overflow: hidden;
    opacity: 0;
    transition: opacity 1s ease;
  }

  /* 蛇角色 */
  #snake {
    width: 200px;
    height: auto;
    background-image: url('snake_idle.png'); /* 替換蛇初始圖片 */
    background-size: contain;
    background-repeat: no-repeat;
    position: relative;
    bottom: -200px;
    transition: bottom 3s ease, background-image 0.5s ease;
  }

  /* 圍巾 */
  #scarf {
    width: 100px;
    height: auto;
    background-image: url('scarf_idle.png'); /* 替換圍巾圖片 */
    background-size: contain;
    background-repeat: no-repeat;
    position: absolute;
    top: 50px;
    right: 50px;
    transition: top 2s ease, left 2s ease;
  }

  /* 文字敘事區 */
  #storyText {
    position: absolute;
    bottom: 50px;
    width: 90%;
    text-align: center;
    font-size: 20px;
    opacity: 0;
    transition: opacity 1s ease;
    background-color: rgba(0,0,0,0.5);
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer; /* 點擊下一步 */
  }

  /* 雪花 */
  .snowflake {
    position: absolute;
    top: -10px;
    width: 10px;
    height: 10px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: fall linear infinite;
  }

  @keyframes fall {
    0% { transform: translateY(0px) translateX(0px); }
    100% { transform: translateY(100vh) translateX(20px); }
  }
</style>
</head>
<body>

<!-- 過渡場眼睛 -->
<div id="transition">
  <div id="eye"></div>
</div>

<!-- 都市場景 -->
<div id="city">
  <div id="snake"></div>
  <div id="scarf"></div>
  <div id="storyText"></div>
</div>

<script>
  const eyeImages = ['eye_closed.png','eye_half.png','eye_open.png'];
  const eye = document.getElementById('eye');
  const transition = document.getElementById('transition');
  const city = document.getElementById('city');
  const snake = document.getElementById('snake');
  const scarf = document.getElementById('scarf');
  const storyText = document.getElementById('storyText');

  // 敘事流程
  const storySteps = [
    "The snake slowly emerges from behind the luxurious cars, snowflakes drifting silently.",
    "The snake watches the silent city in awe.",
    "Suddenly, a gust of wind sweeps through, rustling the scarf around its neck.",
    "\"I have to find my scarf before I pass out.\""
  ];
  let currentStep = 0;

  function nextStep() {
    if(currentStep === 2){
      // 圍巾飛走動畫
      scarf.style.top = '200px';
      scarf.style.left = '500px';
      scarf.style.backgroundImage = "url('scarf_fly.png')"; // 飛走圖片
    }
    if(currentStep < storySteps.length){
      storyText.innerText = storySteps[currentStep];
      storyText.style.opacity = 1;
      currentStep++;
    } else {
      storyText.innerText = "The search begins..."; // 可以接下幕
    }
  }

  // 點擊文字推進故事
  storyText.addEventListener('click', nextStep);

  window.onload = () => {
    // 眼睛動畫
    setTimeout(()=>{ eye.style.backgroundImage = `url(${eyeImages[1]})`; },700);
    setTimeout(()=>{ eye.style.backgroundImage = `url(${eyeImages[2]})`; },1400);
    setTimeout(()=>{ eye.style.opacity = 0; },2200);

    // 過渡結束 → 顯示城市
    setTimeout(()=>{
      transition.style.display = 'none';
      city.style.opacity = 1;

      // 生成雪花
      for(let i=0;i<30;i++){
        const snow = document.createElement('div');
        snow.classList.add('snowflake');
        snow.style.left = Math.random()*window.innerWidth + 'px';
        snow.style.animationDuration = (2+Math.random()*3)+'s';
        snow.style.opacity = Math.random();
        city.appendChild(snow);
      }

      // 蛇滑出
      setTimeout(()=>{
        snake.style.bottom = '50px';
        snake.style.backgroundImage = "url('snake_slide.png')";
        // 顯示第一句文字
        nextStep();
      },500);

    },2500);
  };
</script>

</body>
</html>
